New process, for WSL2:

# install-windows-stuff.ps1 should install Ubuntu

sudo apt-get update
sudo apt-get install -y zsh zsh-doc git vim python3-pip

sudo pip3 install requests

mkdir ~/.ssh
ssh-keygen -t rsa -N "" -f ~/.ssh/id_rsa
cat ~/.ssh/id_rsa.pub

# MANUAL: Go to bitbucket.org, add public key to ssh keys

mkdir bitbucket
cd bitbucket
git clone git@bitbucket.org:/dbesen/all_repos.git
./all_repos/update-all.sh

ln -s -f ~/bitbucket/settings/.irssi ~/
ln -s -f ~/bitbucket/settings/.subversion ~/
ln -s -f ~/bitbucket/settings/.vimrc ~/
ln -s -f ~/bitbucket/settings/.zshrc ~/
ln -s -f ~/bitbucket/settings/.zshenv ~/
ln -s -f ~/bitbucket/settings/.ssh/config ~/.ssh/config
ln -s -f ~/bitbucket/settings/.elinks ~/.elinks
ln -s -f ~/bitbucket/settings/.gitconfig ~/.gitconfig

chsh -s /bin/zsh # Asks for password
exec zsh

vim '+exit' # install vim plugins
# MANUAL: set up ~/.zsh-colors

---

What I use hosting for:
 - Linux console (zsh etc.) - cloudshell or ec2 or cloud9 (done)
 - Static webhosting (e.g. weather.xem.us, davidbesen.com) - amplify (done)
 - Dynamic webhosting (really?) - ec2, lambda (don't need)
 - Coding (python, etc.) - cloud9 (done)
 - Project build & deployment pipelines - amplify? (don't need)
 - Host gobot - lambda (done)
 - Syncing linux console settings via dropbox - No need to sync
 - IRCing? - slack/discord...
 - SSH tunnels? - No use case
 - DNS hosting - route53

MANUAL: Deploy the new system

sudo hostnamectl set-hostname tobu

# MANUAL: edit /etc/hosts to set hostname

sudo apt-get install -y openssh-server zsh zsh-doc git vim ruby ruby-dev make python-pip dos2unix curl nginx irssi inotify-tools sshpass libxcomposite1 libxxf86vm1 libxdamage1 libxfixes3 xcb

mkdir ~/.ssh
ssh-keygen -t rsa -N "" -f ~/.ssh/id_rsa

# MANUAL: Go to bitbucket.org, add ~/.ssh/id_rsa.pub to ssh keys

sudo pip install --upgrade pip
sudo pip install requests

mkdir bitbucket
cd bitbucket
git clone git@bitbucket.org:/dbesen/all_repos.git
./all_repos/update-all.sh


# Install dropbox
~/bitbucket/random/reinstall-dropbox.sh # MANUAL: Visit link when it shows up

ln -s -f ~/Dropbox/bitbucket/settings/.irssi ~/
ln -s -f ~/Dropbox/bitbucket/settings/.subversion ~/
ln -s -f ~/Dropbox/bitbucket/settings/.vimrc ~/
ln -s -f ~/Dropbox/bitbucket/settings/.zshrc ~/
ln -s -f ~/Dropbox/bitbucket/settings/.zshenv ~/
ln -s -f ~/Dropbox/bitbucket/settings/.ssh/config ~/.ssh/config
ln -s -f ~/Dropbox/bitbucket/settings/.elinks ~/.elinks

chsh -s /bin/zsh
exec zsh

~/bitbucket/settings/git-config

vim '+exit' # install vim plugins
# MANUAL: set up ~/.zsh-colors

# MANUAL: Set up nginx to serve websites davidbesen and xem (both in git)

--

Old redeploy script that used to be in the settings repo:

#!/bin/bash -ex

# Run with:
# wget -O- https://bitbucket.org/dbesen/settings/raw/master/redeploy.sh | bash

# TODO test if we're running locally or remotely?
# git remote get-url origin | grep settings

shopt -s extglob

cd
mkdir bitbucket
cd bitbucket
git clone https://dbesen@bitbucket.org/dbesen/settings.git

cd

mkdir bin
pushd bin
ln -sf ../bitbucket/settings/bin/* .
popd

mkdir ~/.ssh
pushd .ssh
ln -sf ../bitbucket/settings/.ssh/* .
popd

ln -sf bitbucket/settings/.!(git) .

sudo apt-get update
sudo apt-get install -y zsh util-linux-user

sudo chsh -s $(which zsh) $(whoami)

./bitbucket/settings/git-config

ssh-keygen -t ed25519 -a 100 -f ~/.ssh/id_ed25519 -q -N ''

pushd ~/bitbucket/settings
git remote set-url origin ssh://git@bitbucket.org/dbesen/settings.git
popd

vim '+exit' # install vim plugins

